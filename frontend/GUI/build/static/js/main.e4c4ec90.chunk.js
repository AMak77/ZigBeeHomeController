(this.webpackJsonpauth=this.webpackJsonpauth||[]).push([[0],{192:function(e,t,a){e.exports=a.p+"static/media/pexels-photo-531880.b415e42d.jpeg"},224:function(e,t,a){e.exports=a(442)},229:function(e,t,a){},230:function(e,t,a){},259:function(e,t){},434:function(e){e.exports=JSON.parse('[{"model":"LED1545G12","state":true,"brightness":true,"color_temp":true},{"model":"LED1623G12","state":true,"brightness":true},{"model":"LED1622G12","state":true,"brightness":true},{"model":"LED1624G9","state":true,"brightness":true,"color_xy":true},{"model":"LED1732G11","state":true,"brightness":true,"color_temp":true},{"model":"E1525","occupancy":true},{"model":"E1745","occupancy":true},{"model":"ZNCZ04LM","state":true},{"model":"ZNLDP12LM","state":true,"brightness":true,"color_temp":true}]')},442:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),l=a.n(c),i=(a(229),a(230),a(24)),o=a(12),u=a(191),s=a.n(u),m=a(192),d=a.n(m),p=a(6),f=a(193),E=a(478),b=a(4),g=a(37),v=a(481),h=a(211),O=a(482),j=a(483),S=a(484),y=a(445),k=a(208),C=a(501),w=a(198),D=a.n(w),x=a(131),N=a.n(x),T=a(194),I=(a(264),T.initializeApp({apiKey:"AIzaSyCxuF_uNVBRP5Ttmbw-7P5z9DUYfkTgt1Q",authDomain:"auth-e4e80.firebaseapp.com",databaseURL:"https://auth-e4e80.firebaseio.com",projectId:'"auth-e4e80",',storageBucket:"auth-e4e80.appspot.com",messagingSenderId:"714546566909"})),A=Object(E.a)((function(e){return{root:{flexGrow:1},NavBar:{background:"#3571b4"},menuButton:{marginRight:e.spacing(2)},title:Object(f.a)({},e.breakpoints.down("xs"),{flexGrow:1}),headerOptions:{display:"flex",flex:1,justifyContent:"flex-end"}}})),_=Object(b.a)({root:{color:"#fff",marginLeft:20,"&:hover":{backgroundColor:"#fff",color:"#000"}}})(v.a),F=Object(b.a)({root:{color:"#fff",textDecoration:"none"}})(h.a);function L(){var e=A(),t=Object(g.a)(),a=Object(O.a)(t.breakpoints.down("xs")),c=Object(n.useState)(null),l=Object(p.a)(c,2),o=l[0],u=l[1],s=Boolean(o);return r.a.createElement("div",{className:e.root},r.a.createElement(j.a,{position:"static",className:e.NavBar},r.a.createElement(S.a,null,r.a.createElement(F,{variant:"h6",className:e.title,component:i.c,to:"/"},"ZIGBEE"),a?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:function(e){u(e.currentTarget)}},r.a.createElement(D.a,null)),r.a.createElement(k.a,{id:"menu-appbar",anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:s,onClick:function(){return u(null)},onClose:function(){return u(null)}},[{menuTitle:"Devices",pageURL:"/"},{menuTitle:"Divisions",pageURL:"/divisions"},{menuTitle:"Statistics",pageURL:"/statistics"},{menuTitle:"Scenes",pageURL:"/scenes"}].map((function(e){var t=e.menuTitle,a=e.pageURL;return r.a.createElement(C.a,{component:i.c,to:a,key:t},t)}))),r.a.createElement(y.a,{edge:"start",className:e.menuButton,color:"inherit",onClick:function(){return I.auth().signOut()}},r.a.createElement(N.a,null))):r.a.createElement("div",{className:e.headerOptions},r.a.createElement(_,{component:i.c,to:"/"},"Devices"),r.a.createElement(_,{component:i.c,to:"/divisions"},"Divisions"),r.a.createElement(_,{component:i.c,to:"/statistics"},"Statistics"),r.a.createElement(_,{component:i.c,to:"/scenes"},"Scenes"),r.a.createElement(_,{onClick:function(){return I.auth().signOut()}},r.a.createElement(N.a,null))))))}var P=a(485),R=a(444),V=a(205),G=a.n(V);function H(e){var t=e.data,a=6e4*(new Date).getTimezoneOffset(),n=t.filter((function(t){return t.device_id===e.id})).splice(0,1);return r.a.createElement("div",null,n.map((function(e){return r.a.createElement("div",{key:e.device_id},!!e.state&&e.state,e.brightness>-1&&r.a.createElement("p",null,"brightness: ",(100*e.brightness/254).toFixed(0),"%"),e.color_temp>-1&&r.a.createElement("p",null,"color_temp: ",(100*e.color_temp/510).toFixed(0),"%"),e.power>-1&&r.a.createElement("p",null,"Power: ",e.power,"W"),e.voltage>-1&&(e.voltage>1e3?r.a.createElement("p",null,"Voltage: ",e.voltage," mV"):r.a.createElement("p",null,"Voltage: ",e.voltage," V")),e.current>-1&&r.a.createElement("p",null,"Current: ",e.current,"A"),e.battery>-1&&r.a.createElement("p",null,"Battery: ",e.battery,"%"),e.consumption>-1&&r.a.createElement("p",null,"Consumption: ",e.consumption,"W"),e.temperature>-1&&r.a.createElement("p",null,"Temperature: ",e.temperature,"\xbaC"),e.humidity>-1&&r.a.createElement("p",null,"Humidity: ",e.humidity,"%"),e.pressure>-1&&r.a.createElement("p",null,"Pressure: ",e.pressure,"mBar"),"true"===e.occupancy&&r.a.createElement("h3",null,"Occupancy"),"false"===e.occupancy&&r.a.createElement("h3",null,"NO Occupancy"),!!e.date&&r.a.createElement("h6",null,new Date(new Date(e.date)-a).toISOString().slice(0,-5).replace(/T/," ")))})))}var M=Object(E.a)({root:{paddingTop:10,flexGrow:1}}),W=Object(b.a)((function(e){return{root:{backgroundColor:"#fff",color:"#008000","&:hover":{backgroundColor:"#008000",color:"#fff"}}}}))(v.a),B=Object(b.a)((function(e){return{root:{backgroundColor:"#fff",color:"#ff0000","&:hover":{backgroundColor:"#ff0000",color:"#fff"}}}}))(v.a);function U(e){var t=e.socket,a=M();return r.a.createElement(P.a,{container:!0,className:a.root},r.a.createElement(P.a,{item:!0,xs:!0},r.a.createElement(P.a,{container:!0,justify:"center",spacing:2},r.a.createElement(P.a,{item:!0},r.a.createElement(W,{size:"small",onClick:function(){return t.emit("state",{device_id:e.id,state:"ON"})}},"ON")),r.a.createElement(P.a,{item:!0},r.a.createElement(B,{size:"small",onClick:function(){return t.emit("state",{device_id:e.id,state:"OFF"})}},"OFF")))))}var z=a(502),q=a(199),J=a.n(q),Q=a(200),Z=a.n(Q),$=Object(E.a)({root:{paddingTop:30,flexGrow:1},slider:{width:150}});function K(e){var t=e.socket,a=$();return r.a.createElement(P.a,{container:!0,className:a.root},r.a.createElement(P.a,{item:!0,xs:!0},r.a.createElement(P.a,{container:!0,justify:"center",spacing:2},r.a.createElement(P.a,{item:!0},r.a.createElement(J.a,null)),r.a.createElement(P.a,{item:!0},r.a.createElement(z.a,{className:a.slider,defaultValue:50,getAriaValueText:function(e){return"".concat(e,"%")},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:25,marks:!0,min:0,max:100,onChangeCommitted:function(a,n){return t.emit("brightness",{device_id:e.id,brightness:parseInt(254*n/100)})}})),r.a.createElement(P.a,{item:!0},r.a.createElement(Z.a,null)))))}var Y=a(132),X=a(201),ee=a.n(X),te=a(202),ae=a.n(te),ne=Object(E.a)({root:{paddingTop:30,flexGrow:1},slider:{width:150}});function re(e){var t=e.socket,a=ne();return r.a.createElement(P.a,{container:!0,className:a.root},r.a.createElement(P.a,{item:!0,xs:!0},r.a.createElement(P.a,{container:!0,justify:"center",spacing:2},r.a.createElement(P.a,{item:!0},r.a.createElement(Y.Icon,{icon:ae.a,widht:"24",height:"24"})),r.a.createElement(P.a,{item:!0},r.a.createElement(z.a,{className:a.slider,defaultValue:50,getAriaValueText:function(e){return"".concat(e,"%")},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:25,marks:!0,min:0,max:100,onChangeCommitted:function(a,n){return t.emit("color_temp",{device_id:e.id,color_temp:parseInt(510*n/100)})}})),r.a.createElement(P.a,{item:!0},r.a.createElement(Y.Icon,{icon:ee.a,widht:"30",height:"30"})))))}var ce=a(30),le=a.n(ce),ie=a(43),oe=a(203),ue=a(204),se=a.n(ue),me=Object(E.a)({primary:{paddingTop:10},root:{paddingTop:20,flexGrow:1,background:"#2d2d2e",borderRadius:10}});function de(e){var t=e.socket,a=me(),c=Object(n.useState)("#fff"),l=Object(p.a)(c,2),i=l[0],o=l[1],u=Object(n.useState)(!1),s=Object(p.a)(u,2),m=s[0],d=s[1];function f(){return(f=Object(ie.a)(le.a.mark((function a(){return le.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.emit("ColorPicker",{device_id:e.id,color:i});case 1:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return r.a.createElement("div",{className:a.primary},r.a.createElement(v.a,{onClick:function(){return d((function(e){return!e}))}},r.a.createElement(se.a,null)),m&&r.a.createElement(P.a,{container:!0,className:a.root},r.a.createElement(P.a,{item:!0,xs:!0},r.a.createElement(P.a,{container:!0,justify:"center"},r.a.createElement(P.a,{item:!0},r.a.createElement(oe.HuePicker,{className:a.picker,color:i,onChange:function(e){return o(e.hex)}}))),r.a.createElement(P.a,{item:!0},r.a.createElement(v.a,{size:"small",style:{color:"#fff"},onClick:function(){return function(){return f.apply(this,arguments)}()}},"Submit")))))}var pe=a(434);function fe(e){var t=e.socket,a=pe.filter((function(t){return t.model===e.model}));return r.a.createElement("div",null,a.map((function(a){return r.a.createElement("div",{key:a.model},!!a.state&&r.a.createElement(U,{id:e.id,socket:t}),!!a.brightness&&r.a.createElement(K,{id:e.id,socket:t}),!!a.color_temp&&r.a.createElement(re,{id:e.id,socket:t}),!!a.color_xy&&r.a.createElement(de,{id:e.id,socket:t}))})))}var Ee=Object(E.a)((function(e){return{sem:{paddingTop:100,textAlign:"center"},grid:{width:"100%",margin:"0px"},paper:{padding:e.spacing(2),textAlign:"center",color:"#fff",background:"#2d2d2e",opacity:.8,borderRadius:"15px",height:450}}})),be=Object(b.a)({root:{float:"right",top:15,right:20,background:"#2d2d2e",opacity:.7,color:"#fff",marginLeft:20,"&:hover":{backgroundColor:"#fff",color:"#000"}}})(v.a);function ge(e){var t=e.socket,a=Ee(),c=Object(n.useState)([]),l=Object(p.a)(c,2),o=l[0],u=l[1],s=Object(n.useState)([]),m=Object(p.a)(s,2),d=m[0],f=m[1],E=Object(n.useRef)(!1);return Object(n.useEffect)((function(){return t.emit("GETDEVICES"),t.emit("GETMEASUREMENTS"),t.on("Devices",(function(e){E.current||u(e)})),t.on("Measurements",(function(e){E.current||f(e)})),function(){E.current=!0}}),[t]),r.a.createElement("div",null,r.a.createElement(be,{size:"small",component:i.b,to:"/devices_settings","aria-label":"settings from user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",startIcon:r.a.createElement(G.a,null)},"Settings"),o.length?r.a.createElement(P.a,{container:!0,spacing:6,className:a.grid},o.map((function(t){return"Coordinator"!==t.type&&r.a.createElement(P.a,{item:!0,xs:12,md:6,lg:3,key:t.ieeeAddr},r.a.createElement(R.a,{className:a.paper},r.a.createElement(h.a,{variant:"h5",gutterBottom:!0},t.friendly_name),r.a.createElement(h.a,{variant:"subtitle1",gutterBottom:!0},t.description),r.a.createElement(H,{id:t.ieeeAddr,data:d}),r.a.createElement(fe,{id:t.ieeeAddr,model:t.model,data:d,socket:e.socket})))}))):r.a.createElement("div",{className:a.sem},r.a.createElement(h.a,{variant:"h3"},"NO DEVICES TO SHOW")))}var ve=a(57),he=a.n(ve),Oe=a(503),je=a(499),Se=a(489),ye=a(490),ke=a(491),Ce=a(45),we=a.n(Ce),De=Object(E.a)((function(e){return{center:{textAlign:"center"},paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),xe=Object(b.a)({root:{float:"right",top:15,right:20,background:"#2d2d2e",opacity:.7,color:"#fff",marginLeft:20,"&:hover":{backgroundColor:"#fff",color:"#000"}}})(v.a);function Ne(e){var t=e.socket,a=De(),c=Object(n.useState)(!1),l=Object(p.a)(c,2),i=l[0],o=l[1],u=Object(n.useState)(!0),s=Object(p.a)(u,2),m=s[0],d=s[1],f=Object(n.useState)(""),E=Object(p.a)(f,2),b=E[0],g=E[1];Object(n.useEffect)((function(){d(!b)}),[b]);var O=function(){o(!1)};var j=r.a.createElement("div",{className:a.center},r.a.createElement(h.a,null,"Set the name of new division.."),r.a.createElement(Oe.a,{id:"new-division",label:"Write here..",value:b,onChange:function(e){g(e.target.value)}}));return r.a.createElement("div",null,r.a.createElement(xe,{size:"small",onClick:function(){o(!0)},startIcon:r.a.createElement(we.a,null)},"Add Division"),r.a.createElement(je.a,{open:i,onClose:O,scroll:"paper","aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement(Se.a,{id:"scroll-dialog-title"},"Add Division"),r.a.createElement(ye.a,{dividers:!0},j),r.a.createElement(ke.a,null,r.a.createElement(v.a,{onClick:O,color:"secondary"},"Cancel"),r.a.createElement(v.a,{disabled:m,onClick:function(){t.emit("NewDivision",{name:b}),g(""),o(!1)},color:"primary"},"Submit"))))}var Te=Object(E.a)((function(e){return{sem:{paddingTop:100,textAlign:"center"},grid:{width:"100%",margin:"0px"},paper:{padding:e.spacing(2),textAlign:"center",color:"#fff",background:"#2d2d2e",borderRadius:"15px",height:300,opacity:.8},customizedButton:{position:"relative",left:"95%",top:"-9%",backgroundColor:"red",color:"white"}}}));function Ie(e){var t=e.socket,a=Te(),c=Object(n.useState)([]),l=Object(p.a)(c,2),i=l[0],o=l[1],u=Object(n.useState)([]),s=Object(p.a)(u,2),m=s[0],d=s[1],f=Object(n.useRef)(!1);return Object(n.useEffect)((function(){return t.emit("GETDIVISIONS"),t.emit("GETDEVICES"),t.on("Divisions",(function(e){f.current||o(e)})),t.on("Devices",(function(e){f.current||d(e)})),function(){f.current=!0}}),[t]),r.a.createElement("div",null,r.a.createElement(Ne,{socket:t}),i.length?r.a.createElement(P.a,{container:!0,spacing:6,className:a.grid},i.map((function(e){return r.a.createElement(P.a,{item:!0,xs:12,md:6,lg:3,key:e.name},r.a.createElement(R.a,{className:a.paper},r.a.createElement(P.a,{container:!0,justify:"flex-end",alignItems:"flex-end"},r.a.createElement(y.a,{style:{color:"white"},onClick:function(){return function(e){t.emit("DeleteDivision",{name:e}),t.emit("GETDIVISIONS")}(e.name)}},r.a.createElement(he.a,null))),r.a.createElement(h.a,{variant:"h5",gutterBottom:!0},e.name),m.map((function(t){return t.division===e.name&&r.a.createElement("li",{key:t.ieeeAddr,style:{paddingTop:10}},t.friendly_name)}))))}))):r.a.createElement("div",{className:a.sem},r.a.createElement(h.a,{variant:"h3"},"NO DIVISIONS TO SHOW")))}var Ae=a(493),_e=a(40),Fe=a(488),Le=a(500),Pe=a(492),Re=a(498),Ve=a(505),Ge=a(497),He=Object(E.a)((function(e){return{center:{paddingTop:20,textAlign:"center"},paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},formControl:{textAlign:"center",margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),Me=Object(b.a)({root:{float:"right",top:15,right:20,background:"#2d2d2e",opacity:.7,color:"#fff",marginLeft:20,"&:hover":{backgroundColor:"#fff",color:"#000"}}})(v.a);function We(e){var t=Object(n.useState)(!1),a=Object(p.a)(t,2),c=a[0],l=a[1],i=e.socket,o=6e4*(new Date).getTimezoneOffset(),u=He(),s=Object(n.useRef)(!1),m=Object(n.useState)("Simple"),d=Object(p.a)(m,2),f=d[0],E=d[1],b=Object(n.useState)(new Date),g=Object(p.a)(b,2),O=g[0],j=g[1],S=Object(n.useState)(""),y=Object(p.a)(S,2),k=y[0],w=y[1],D=Object(n.useState)([]),x=Object(p.a)(D,2),N=x[0],T=x[1],I=Object(n.useState)([]),A=Object(p.a)(I,2),_=A[0],F=A[1],L=Object(n.useState)(""),P=Object(p.a)(L,2),R=P[0],V=P[1],G=Object(n.useState)([]),H=Object(p.a)(G,2),M=H[0],W=H[1],B=Object(n.useState)(""),U=Object(p.a)(B,2),z=U[0],q=U[1],J=Object(n.useState)(""),Q=Object(p.a)(J,2),Z=Q[0],$=Q[1],K=Object(n.useState)(""),Y=Object(p.a)(K,2),X=Y[0],ee=Y[1],te=Object(n.useState)(""),ae=Object(p.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)(""),le=Object(p.a)(ce,2),ie=le[0],oe=le[1],ue=Object(n.useState)([]),se=Object(p.a)(ue,2),me=se[0],de=se[1],pe=Object(n.useState)(""),fe=Object(p.a)(pe,2),Ee=fe[0],be=fe[1],ge=Object(n.useState)(""),ve=Object(p.a)(ge,2),he=ve[0],Ce=ve[1],De=Object(n.useState)(!0),xe=Object(p.a)(De,2),Ne=xe[0],Te=xe[1],Ie=Object(n.useRef)(null);Object(n.useEffect)((function(){if(c){var e=Ie.current;null!==e&&e.focus()}}),[c]),Object(n.useEffect)((function(){return i.emit("GETDEVICES"),i.emit("GETMEASUREMENTS"),i.on("Devices",(function(e){s.current||T(e)})),i.on("Measurements",(function(e){s.current||F(e)})),function(){s.current=!0}}),[i]);var Ae=function(){l(!1)};Object(n.useEffect)((function(){q(""),ee(""),$("")}),[R]),Object(n.useEffect)((function(){oe(""),be(""),oe("")}),[ne]),Object(n.useEffect)((function(){var e=Object.assign.apply(Object,[{}].concat(Object(_e.a)(_.filter((function(e){return e.device_id===R})).splice(0,1)))),t=["_id","device_id","date","color","__v","linkquality"];W(Object.keys(e).filter((function(e){return!t.includes(e)})))}),[R,_]),Object(n.useEffect)((function(){var e=Object.assign.apply(Object,[{}].concat(Object(_e.a)(_.filter((function(e){return e.device_id===ne})).splice(0,1)))),t=["_id","device_id","date","color","__v","linkquality"];de(Object.keys(e).filter((function(e){return!t.includes(e)})))}),[ne,_]),Object(n.useEffect)((function(){$(""),ee("")}),[z]),Object(n.useEffect)((function(){"EQUALS TO"===Z?Ce("==="):"DIFFERENT THAN"===Z?Ce("!=="):"GREATER THAN"===Z?Ce(">"):"SMALLER THAN"===Z&&Ce("<")}),[Z]),Object(n.useEffect)((function(){V(""),re(""),$(""),ee(""),be(""),q(""),oe(""),j("Date"===f?new Date:"")}),[f]),Object(n.useEffect)((function(){Te(!("Date"===f&&O&&ne&&ie&&Ee)&&!("Simple"===f&&R&&z&&Z&&X&&ie&&Ee))}),[f,O,R,z,Z,X,ne,ie,Ee]);var We=r.a.createElement("form",{className:u.center},r.a.createElement(Fe.a,{component:"fieldset"},r.a.createElement(Le.a,{row:!0,"aria-label":"position",name:"position",value:f,onChange:function(e){return E(e.target.value)}},r.a.createElement(Pe.a,{value:"Simple",control:r.a.createElement(Re.a,{color:"primary"}),label:"Simple",labelPlacement:"top"}),r.a.createElement(Pe.a,{value:"Date",control:r.a.createElement(Re.a,{color:"primary"}),label:"Date",labelPlacement:"top"})))," ",r.a.createElement("br",null),"Simple"===f?r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{variant:"h5"},"IF"),r.a.createElement(Fe.a,{className:u.formControl},r.a.createElement(Ve.a,null,"Sensor"),r.a.createElement(Ge.a,{value:R,onChange:function(e){return V(e.target.value)}},N.map((function(e){return r.a.createElement(C.a,{value:e.ieeeAddr,key:e.ieeeAddr},e.friendly_name)})))),r.a.createElement(Fe.a,{className:u.formControl},r.a.createElement(Ve.a,null,"Parameter"),r.a.createElement(Ge.a,{value:z,onChange:function(e){return q(e.target.value)}},M.map((function(e){return r.a.createElement(C.a,{value:e,key:e},e)})))),r.a.createElement(Fe.a,{className:u.formControl},r.a.createElement(Ve.a,null,"Operator"),"occupancy"===z||"state"===z?r.a.createElement(Ge.a,{value:Z,onChange:function(e){return $(e.target.value)}},r.a.createElement(C.a,{value:"EQUALS TO"},"===")):r.a.createElement(Ge.a,{value:Z,onChange:function(e){return $(e.target.value)}},r.a.createElement(C.a,{value:"EQUALS TO"},"EQUALS TO"),r.a.createElement(C.a,{value:"DIFFERENT THAN"},"DIFFERENT THAN"),r.a.createElement(C.a,{value:"GREATER THAN"},"GREATER THAN"),r.a.createElement(C.a,{value:"SMALLER THAN"},"SMALLER THAN"))),r.a.createElement(Fe.a,{className:u.formControl},"state"===z?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve.a,{id:"demo-simple-select-label"},"StateValue"),r.a.createElement(Ge.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:X,onChange:function(e){return ee(e.target.value)}},r.a.createElement(C.a,{value:"ON"},"ON"),r.a.createElement(C.a,{value:"OFF"},"OFF"))):"occupancy"===z?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve.a,null,"StateValue"),r.a.createElement(Ge.a,{label:"Value",value:X,onChange:function(e){return ee(e.target.value)}},r.a.createElement(C.a,{value:"true"},"true"),r.a.createElement(C.a,{value:"false"},"false"))):"brightness"===z?r.a.createElement(Oe.a,{label:"Number between 0 - 254",type:"number",InputLabelProps:{shrink:!0},value:X,onChange:function(e){e.target.value>254?ee(254):e.target.value<0?ee(0):ee(e.target.value)}}):"color_temp"===z?r.a.createElement(Oe.a,{label:"Number between 0 - 508",type:"number",InputLabelProps:{shrink:!0},value:Ee,onChange:function(e){e.target.value>508?ee(508):e.target.value<0?ee(0):ee(e.target.value)}}):r.a.createElement(Oe.a,{label:"Value",type:"number",InputLabelProps:{shrink:!0},value:X,onChange:function(e){e.target.value<0?ee(0):ee(e.target.value)}})),r.a.createElement(h.a,{variant:"h5"},"THEN"),r.a.createElement(Fe.a,{className:u.formControl},r.a.createElement(Ve.a,null,"Atuator"),r.a.createElement(Ge.a,{value:ne,onChange:function(e){return re(e.target.value)}},N.map((function(e){return r.a.createElement(C.a,{value:e.ieeeAddr,key:e.ieeeAddr},e.friendly_name)})))),r.a.createElement(Fe.a,{className:u.formControl},r.a.createElement(Ve.a,null,"Parameter"),r.a.createElement(Ge.a,{value:ie,onChange:function(e){return oe(e.target.value)}},me.map((function(e){return r.a.createElement(C.a,{value:e,key:e},e)})))),r.a.createElement(Fe.a,{className:u.formControl},"state"===ie?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve.a,null,"StateValue"),r.a.createElement(Ge.a,{value:Ee,onChange:function(e){return be(e.target.value)}},r.a.createElement(C.a,{value:"ON"},"ON"),r.a.createElement(C.a,{value:"OFF"},"OFF"))):"occupancy"===ie?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve.a,null,"StateValue"),r.a.createElement(Ge.a,{label:"Value",value:Ee,onChange:function(e){return be(e.target.value)}},r.a.createElement(C.a,{value:"true"},"true"),r.a.createElement(C.a,{value:"false"},"false"))):"brightness"===ie?r.a.createElement(Oe.a,{label:"Number between 0 - 254",type:"number",InputLabelProps:{shrink:!0},value:Ee,onChange:function(e){e.target.value>254?be(254):e.target.value<0?be(0):be(e.target.value)}}):"color_temp"===ie?r.a.createElement(Oe.a,{label:"Number between 0 - 508",type:"number",InputLabelProps:{shrink:!0},value:Ee,onChange:function(e){e.target.value>508?be(508):e.target.value<0?be(0):be(e.target.value)}}):r.a.createElement(Oe.a,{label:"Value",type:"number",InputLabelProps:{shrink:!0},value:Ee,onChange:function(e){e.target.value<0?be(0):be(e.target.value)}}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe.a,{className:u.root},r.a.createElement(Oe.a,{id:"startDate",label:"Start Date",type:"datetime-local",defaultValue:new Date(Date.now()-o).toISOString().slice(0,-8),InputProps:{inputProps:{min:new Date(Date.now()-o).toISOString().slice(0,-8)}},onChange:function(e){var t=Date.parse(e.target.value);if(!1===isNaN(t)){var a=new Date(e.target.value);a.setSeconds(0),a.setMilliseconds(0),j(new Date(a-o).toISOString().slice(0,-5)),w("")}else w("Invalid Date!!")},helperText:k,className:u.textField,InputLabelProps:{shrink:!0}})),r.a.createElement("br",null),r.a.createElement(Fe.a,{className:u.formControl},r.a.createElement(Ve.a,{id:"demo-simple-select-label"},"Atuator"),r.a.createElement(Ge.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:ne,onChange:function(e){return re(e.target.value)}},N.map((function(e){return r.a.createElement(C.a,{value:e.ieeeAddr,key:e.ieeeAddr},e.friendly_name)})))),r.a.createElement(Fe.a,{className:u.formControl},r.a.createElement(Ve.a,null,"Parameter"),r.a.createElement(Ge.a,{value:ie,onChange:function(e){return oe(e.target.value)}},me.map((function(e){return r.a.createElement(C.a,{value:e,key:e},e)})))),r.a.createElement(Fe.a,{className:u.formControl},"state"===ie?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve.a,null,"StateValue"),r.a.createElement(Ge.a,{value:Ee,onChange:function(e){return be(e.target.value)}},r.a.createElement(C.a,{value:"ON"},"ON"),r.a.createElement(C.a,{value:"OFF"},"OFF"))):"occupancy"===ie?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve.a,{id:"demo-simple-select-label"},"StateValue"),r.a.createElement(Ge.a,{label:"Value",value:Ee,onChange:function(e){return be(e.target.value)}},r.a.createElement(C.a,{value:"true"},"true"),r.a.createElement(C.a,{value:"false"},"false"))):"brightness"===ie?r.a.createElement(Oe.a,{label:"Number between 0 - 254",type:"number",InputLabelProps:{shrink:!0},value:Ee,onChange:function(e){e.target.value>254?be(254):e.target.value<0?be(0):be(e.target.value)}}):"color_temp"===ie?r.a.createElement(Oe.a,{label:"Number between 0 - 508",type:"number",InputLabelProps:{shrink:!0},value:Ee,onChange:function(e){e.target.value>508?be(508):e.target.value<0?be(0):be(e.target.value)}}):r.a.createElement(Oe.a,{label:"Value",type:"number",InputLabelProps:{shrink:!0},value:Ee,onChange:function(e){e.target.value<0?be(0):be(e.target.value)}}))));return r.a.createElement("div",null,r.a.createElement(Me,{size:"small",onClick:function(){l(!0)},startIcon:r.a.createElement(we.a,null)},"Add Scene"),r.a.createElement(je.a,{open:c,onClose:Ae,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},r.a.createElement(Se.a,{id:"scroll-dialog-title"},"Add Scene"),r.a.createElement(ye.a,{dividers:!0},We),r.a.createElement(ke.a,null,r.a.createElement(v.a,{onClick:Ae,color:"secondary"},"Cancel"),r.a.createElement(v.a,{disabled:Ne,color:"primary",onClick:function(e){e.preventDefault(),"Simple"===f?i.emit("NewScene",{sensor:R,conditionParameter:z,conditionOperator:he,conditionState:X,atuator:ne,thenParameter:ie,thenState:Ee}):"Date"===f&&i.emit("NewScene",{date:O,atuator:ne,thenParameter:ie,thenState:Ee}),i.emit("GETSCENES"),l(!1)}},"Submit"))))}var Be=Object(b.a)({switchBase:{color:"#fff","&$checked":{color:"#fff"},"&$checked + $track":{backgroundColor:"#00ff00"}},checked:{},track:{}})(Ae.a),Ue=Object(E.a)((function(e){return{sem:{paddingTop:100,textAlign:"center"},center:{paddingTop:30,textAlign:"center"},grid:{width:"100%",margin:"0px",justify:"center"},paper:{padding:e.spacing(2),textAlign:"center",color:"#fff",background:"#2d2d2e",borderRadius:"15px",opacity:.8},formControl:{textAlign:"center",margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}));function ze(e){var t=6e4*(new Date).getTimezoneOffset(),a=e.socket,c=Ue(),l=Object(n.useState)([]),i=Object(p.a)(l,2),o=i[0],u=i[1],s=Object(n.useState)([]),m=Object(p.a)(s,2),d=m[0],f=m[1],E=Object(n.useState)(new Date(Date.now()-t).toISOString().slice(0,-5).replace("T"," ")),b=Object(p.a)(E,2),g=b[0],v=b[1],O=Object(n.useRef)(!1);return Object(n.useEffect)((function(){return a.emit("GETSCENES"),a.emit("GETDEVICES"),a.on("Scenes",(function(e){O.current||u(e)})),a.on("Devices",(function(e){O.current||f(e)})),setInterval((function(){O.current||v(new Date(Date.now()-t).toISOString().slice(0,-5).replace("T"," "))}),1e3),function(){O.current=!0}}),[a,t]),r.a.createElement("div",null,r.a.createElement(We,{socket:a}),r.a.createElement("div",{className:c.center},r.a.createElement("h1",null,g),o.length?r.a.createElement(P.a,{container:!0,spacing:6,className:c.grid},o.map((function(e){return r.a.createElement(P.a,{item:!0,xs:12,md:6,lg:4,key:e._id},r.a.createElement(R.a,{className:c.paper},r.a.createElement(P.a,{container:!0,justify:"flex-end",alignItems:"flex-end"},r.a.createElement(y.a,{style:{color:"white"},onClick:function(t){return n=t,r=e._id,n.preventDefault(),a.emit("DeleteScene",{_id:r}),void a.emit("GETSCENES");var n,r}},r.a.createElement(he.a,null))),e.sensor?r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{variant:"h6"},d.map((function(t){return t.ieeeAddr===e.sensor&&t.friendly_name})),": IF ",e.conditionParameter,e.conditionOperator,e.conditionState," THEN"),r.a.createElement(h.a,{variant:"h6"},d.map((function(t){return t.ieeeAddr===e.atuator&&t.friendly_name}))," ",e.thenParameter," ",e.thenState)):r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{variant:"h6"},e.date," THEN"),r.a.createElement(h.a,{variant:"h6"},d.map((function(t){return t.ieeeAddr===e.atuator&&t.friendly_name}))," ",e.thenParameter," ",e.thenState)),r.a.createElement(Be,{checked:e.state,onChange:function(){return function(e,t){a.emit("SceneStatus",{_id:e,state:!t}),a.emit("GETSCENES")}(e._id,e.state)}})))}))):r.a.createElement("div",{className:c.sem},r.a.createElement(h.a,{variant:"h3"},"NO SCENES TO SHOW"))))}var qe=a(206),Je=a.n(qe),Qe=Object(E.a)((function(e){return{center:{textAlign:"center"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function Ze(e){var t=e.socket,a=Qe(),c=Object(n.useState)(!1),l=Object(p.a)(c,2),i=l[0],o=l[1],u=Object(n.useState)(""),s=Object(p.a)(u,2),m=s[0],d=s[1],f=Object(n.useState)(!0),E=Object(p.a)(f,2),b=E[0],g=E[1];Object(n.useEffect)((function(){g(!m)}),[m]);var O=function(){o(!1)},j=r.a.createElement("div",{className:a.center},r.a.createElement(h.a,null,"The old name of this device is ",e.name,"."),r.a.createElement(Oe.a,{id:"edit-device",style:{paddingTop:10},placeholder:"Write new name here..",value:m,onChange:function(e){return d(e.target.value)}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{variant:"contained",color:"primary",size:"small",onClick:function(){o(!0)}},"Edit"),r.a.createElement(je.a,{open:i,onClose:O},r.a.createElement(Se.a,null,"Edit name of the device"),r.a.createElement(ye.a,{dividers:!0},j),r.a.createElement(ke.a,null,r.a.createElement(v.a,{onClick:O,color:"secondary"},"Cancel"),r.a.createElement(v.a,{disabled:b,onClick:function(){t.emit("EditDevice",{old_name:e.name,name:m}),O()},color:"primary"},"Submit"))))}var $e=Object(E.a)((function(e){return{root:{justifyContent:"center"},grid:{width:"100%",margin:"0px"},paper:{padding:e.spacing(2),textAlign:"center",color:"#fff",opacity:.8,borderRadius:"15px",background:"#2d2d2e"},button:{margin:e.spacing(1)},ooo:{justifyContent:"center"},whiteColor:{color:"white"}}}));function Ke(e){var t=e.socket,a=$e(),c=Object(n.useState)([]),l=Object(p.a)(c,2),i=l[0],o=l[1],u=Object(n.useState)([]),s=Object(p.a)(u,2),m=s[0],d=s[1],f=Object(n.useRef)(!1);function E(){return(E=Object(ie.a)(le.a.mark((function e(a){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.emit("DeleteDevice",{ieeeAddr:a});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){return t.emit("GETDIVISIONS"),t.emit("GETDEVICES"),t.on("Divisions",(function(e){f.current||d(e)})),t.on("Devices",(function(e){f.current||o(e)})),function(){f.current=!0}}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(P.a,{container:!0,spacing:6,className:a.grid},i.map((function(n){return"Coordinator"!==n.type&&r.a.createElement(P.a,{item:!0,xs:12,md:6,lg:3,key:n.ieeeAddr},r.a.createElement(R.a,{className:a.paper},!!n.friendly_name&&r.a.createElement("p",null,"Name: ",r.a.createElement("b",null,n.friendly_name)),!!n.type&&r.a.createElement("p",null,"Type: ",r.a.createElement("b",null,n.type)),!!n.vendor&&r.a.createElement("p",null,"Vendor: ",r.a.createElement("b",null,n.vendor)),!!n.model&&r.a.createElement("p",null,"Model: ",r.a.createElement("b",null,n.model)),!!n.description&&r.a.createElement("p",null,"Description: ",r.a.createElement("b",null,n.description)),r.a.createElement(Oe.a,{id:"standard-select-division",style:{color:"#fff"},select:!0,label:"Select",InputProps:{className:a.whiteColor},FormHelperTextProps:{className:a.whiteColor},value:n.division,onChange:function(e){return a=e,r=n.ieeeAddr,void(f.current||t.emit("UpdateDeviceDivision",{ieeeAddr:r,division:a.target.value}));var a,r},helperText:"Please select division for this device"},m.map((function(e){return r.a.createElement(C.a,{key:e.name,value:e.name},e.name)}))),r.a.createElement("br",null),r.a.createElement(Ze,{name:n.friendly_name,socket:e.socket}),r.a.createElement(v.a,{size:"small",variant:"contained",color:"secondary",className:a.button,startIcon:r.a.createElement(Je.a,null),onClick:function(){return function(e){return E.apply(this,arguments)}(n.ieeeAddr)}},"Delete")))})))))}var Ye=a(207),Xe=Object(E.a)((function(e){return{center:{paddingTop:20,textAlign:"center"},formControl:{textAlign:"center",margin:e.spacing(1),minWidth:120},paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),et=Object(b.a)({root:{float:"right",top:15,right:20,background:"#2d2d2e",opacity:.7,color:"#fff",marginLeft:20,"&:hover":{backgroundColor:"#fff",color:"#000"}}})(v.a);function tt(e){var t=e.socket,a=Xe(),c=Object(n.useState)(!1),l=Object(p.a)(c,2),i=l[0],o=l[1],u=Object(n.useState)([]),s=Object(p.a)(u,2),m=s[0],d=s[1],f=Object(n.useState)([]),E=Object(p.a)(f,2),b=E[0],g=E[1],h=Object(n.useState)(""),O=Object(p.a)(h,2),j=O[0],S=O[1],y=Object(n.useState)(""),k=Object(p.a)(y,2),w=k[0],D=k[1],x=Object(n.useState)([]),N=Object(p.a)(x,2),T=N[0],I=N[1],A=Object(n.useState)(!0),_=Object(p.a)(A,2),F=_[0],L=_[1],P=Object(n.useRef)(!1);Object(n.useEffect)((function(){return t.emit("GETDEVICES"),t.emit("GETMEASUREMENTS"),t.on("Devices",(function(e){P.current||d(e)})),t.on("Measurements",(function(e){P.current||g(e)})),function(){P.current=!0}}),[t]),Object(n.useEffect)((function(){var e=Object.assign.apply(Object,[{}].concat(Object(_e.a)(b.filter((function(e){return e.device_id===j})).splice(0,1)))),t=["_id","device_id","date","color","__v","linkquality"];I(Object.keys(e).filter((function(e){return!t.includes(e)})))}),[j,b]),Object(n.useEffect)((function(){D(""),L(!0)}),[j]),Object(n.useEffect)((function(){w.length>0&&L(!1)}),[w]);var R=function(){o(!1)};var V=r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:a.center},r.a.createElement(Fe.a,{className:a.formControl},r.a.createElement(Ve.a,null,"Device"),r.a.createElement(Ge.a,{value:j,onChange:function(e){return S(e.target.value)}},m.map((function(e){return"Coordinator"!==e.friendly_name&&r.a.createElement(C.a,{key:e.ieeeAddr,value:e.ieeeAddr},e.friendly_name)})))),r.a.createElement(Fe.a,{className:a.formControl},r.a.createElement(Ve.a,null,"Parameter"),r.a.createElement(Ge.a,{value:w,onChange:function(e){return D(e.target.value)}},T.map((function(e){return r.a.createElement(C.a,{key:e.toString(),value:e},e)}))))));return r.a.createElement("div",null,r.a.createElement(et,{size:"small",onClick:function(){o(!0)},startIcon:r.a.createElement(we.a,null)},"Add Graphic"),r.a.createElement(je.a,{open:i,onClose:R,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",style:{display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement(Se.a,{id:"customized-dialog-title",onClose:R},"Add Graphic"),r.a.createElement(ye.a,{dividers:!0},V),r.a.createElement(ke.a,null,r.a.createElement(v.a,{onClick:R,color:"secondary"},"Cancel"),r.a.createElement(v.a,{disabled:F,onClick:function(e){e.preventDefault(),t.emit("NewGraphic",{device:j,parameter:w}),o(!1)},color:"primary",className:a.button},"Submit"))))}var at=Object(E.a)((function(e){return{center:{paddingTop:20,textAlign:"center"},paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},modalStyle1:{position:"absolute",top:"10%",margin:"auto",overflow:"scroll",display:"block",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},formControl:{textAlign:"center",margin:e.spacing(1),minWidth:200}}})),nt=Object(b.a)({root:{float:"right",top:15,right:20,background:"#2d2d2e",opacity:.7,color:"#fff",marginLeft:20,"&:hover":{backgroundColor:"#fff",color:"#000"}}})(v.a);function rt(e){var t=e.socket,a=at(),c=Object(n.useState)(!1),l=Object(p.a)(c,2),i=l[0],o=l[1],u=Object(n.useState)([]),s=Object(p.a)(u,2),m=s[0],d=s[1],f=Object(n.useState)([]),E=Object(p.a)(f,2),b=E[0],g=E[1],v=6e4*(new Date).getTimezoneOffset(),h=Object(n.useState)(0),O=Object(p.a)(h,2),j=O[0],S=O[1],y=Object(n.useState)(""),k=Object(p.a)(y,2),w=k[0],D=k[1],x=Object(n.useState)(""),N=Object(p.a)(x,2),T=N[0],I=N[1],A=Object(n.useState)(""),_=Object(p.a)(A,2),F=_[0],L=_[1],P=Object(n.useState)(""),R=Object(p.a)(P,2),V=R[0],G=R[1],H=Object(n.useState)([]),M=Object(p.a)(H,2),W=M[0],B=M[1],U=Object(n.useState)(0),z=Object(p.a)(U,2),q=z[0],J=z[1],Q=Object(n.useState)(new Date(Date.now()-v).toISOString().slice(0,-8)),Z=Object(p.a)(Q,2),$=Z[0],K=Z[1],Y=Object(n.useState)(new Date(Date.now()-v).toISOString().slice(0,-8)),X=Object(p.a)(Y,2),ee=X[0],te=X[1],ae=Object(n.useState)(new Date(Date.now()-v).toISOString().slice(0,-5).replace("T"," ")),ne=Object(p.a)(ae,2),re=ne[0],ce=ne[1],le=Object(n.useRef)(!1);Object(n.useEffect)((function(){return t.emit("GETDEVICES"),t.emit("GETMEASUREMENTS"),t.on("Devices",(function(e){le.current||g(e)})),t.on("Measurements",(function(e){le.current||d(e)})),setInterval((function(){le.current||ce(new Date(Date.now()-v).toISOString().slice(0,-5).replace("T"," "))}),1e3),function(){le.current=!0}}),[t,v]),Object(n.useEffect)((function(){var e=Object.assign.apply(Object,[{}].concat(Object(_e.a)(m.filter((function(e){return e.device_id===F})).splice(0,1)))),t=["_id","device_id","date","color","__v","linkquality"];B(Object.keys(e).filter((function(e){return!t.includes(e)})))}),[F,m]),Object(n.useEffect)((function(){G("")}),[F]),Object(n.useEffect)((function(){if(m&&ee&&$&&ee&&$<ee&&F&&V){var e=m.filter((function(e){return e.device_id===F})).reverse(),t=new Date($).getTime(),a=new Date(ee).getTime(),n=[],r=[],c=[];e.forEach((function(e,t){var a=new Date(new Date(e.date)-v).toISOString().slice(0,-5);a>$&&a<ee&&(n.push(e[V]),r.push(a)),c.push(new Date(e.date).getTime())})),r.splice(0,0,$),r.splice(r.length,0,ee);var l=Math.max.apply(Math,Object(_e.a)(c.filter((function(e){return e<=t})))),i=Math.max.apply(Math,Object(_e.a)(c.filter((function(e){return e<=a}))));e.forEach((function(e){return new Date(e.date).getTime()===l&&n.splice(0,0,e[V])})),e.forEach((function(e){return new Date(e.date).getTime()===i&&n.splice(n.length,0,e[V])}));for(var o=r.map((function(e){return new Date(e).getTime()})),u=o.slice(1).map((function(e,t){return e-o[t]})),s=[],d=0;d<n.length;d++)n[d+1]&&s.push((n[d]+n[d+1])/2*u[d]);var p=s.reduce((function(e,t){return e+t}),0),f=u.reduce((function(e,t){return e+t}),0);J((p/f).toFixed(2))}}),[m,ee,$,v,F,V]),Object(n.useEffect)((function(){$>ee?(D("Invalid Date"),I("Invalid Date")):(D(""),I(""))}),[$,ee]);var ie=r.a.createElement("div",{className:a.center},r.a.createElement("h1",null,re),r.a.createElement(Fe.a,{className:a.formControl},r.a.createElement(Ve.a,null,"Select the device:"),r.a.createElement(Ge.a,{id:"device",value:F,onChange:function(e){return L(e.target.value)}},b.map((function(e){return r.a.createElement(C.a,{value:e.ieeeAddr,key:e.ieeeAddr},e.friendly_name)}))),r.a.createElement(Fe.a,{className:a.formControl},r.a.createElement(Ve.a,null,"Parameter"),r.a.createElement(Ge.a,{id:"parameter",value:V,onChange:function(e){return G(e.target.value)}},W.map((function(e){return r.a.createElement(C.a,{key:e.toString(),value:e},e)})))),r.a.createElement("br",null)),r.a.createElement("form",{noValidate:!0,className:a.root},r.a.createElement(Oe.a,{id:"startDate",style:{paddingRight:6},label:"Start Date",type:"datetime-local",defaultValue:new Date(Date.now()-v).toISOString().slice(0,-8),InputProps:{inputProps:{max:new Date(Date.now()-v).toISOString().slice(0,-8)}},onChange:function(e){var t=Date.parse(e.target.value);if(!1===isNaN(t)){var a=new Date(e.target.value);a.setSeconds(0),a.setMilliseconds(0),K(new Date(a-v).toISOString().slice(0,-5)),D("")}else D("Invalid Date!!")},helperText:w,className:a.textField,InputLabelProps:{shrink:!0}}),r.a.createElement(Oe.a,{id:"endDate",label:"End Date",type:"datetime-local",defaultValue:new Date(Date.now()-v).toISOString().slice(0,-8),InputProps:{inputProps:{max:new Date(Date.now()-v).toISOString().slice(0,-8)}},onChange:function(e){var t=Date.parse(e.target.value);if(!1===isNaN(t)){var a=new Date(e.target.value);a.setSeconds(0),a.setMilliseconds(0),te(new Date(a-v).toISOString().slice(0,-5)),I("")}else I("Invalid Date!!")},helperText:T,className:a.textField,InputLabelProps:{shrink:!0}})),r.a.createElement("br",null),"power"===V?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Average Power\u2248 ",q," W"),r.a.createElement(Oe.a,{label:"Tax",type:"number",onChange:function(e){return S(e.target.value)},InputLabelProps:{shrink:!0}}),r.a.createElement("p",null,"Energy: ",(q*(new Date(ee).getTime()-new Date($).getTime())/1e3).toFixed(2)," J = ",q*(new Date(ee).getTime()-new Date($).getTime())/1e3/36e5," kWh"),r.a.createElement("p",null,"Price: ",q*(new Date(ee).getTime()-new Date($).getTime())/1e3/36e5*j,"\u20ac")):"brightness"===V?r.a.createElement("h3",null,"Average Brightness\u2248 ",(100*q/255).toFixed(0),"%"):"color_temp"===V?r.a.createElement("h3",null,"Average Color Temperature\u2248 ",(100*q/510).toFixed(0)," %"):"temperature"===V?r.a.createElement("h3",null,"Average Temperature\u2248 ",q,"\xbaC"):"voltage"===V?q>1e3?r.a.createElement("h3",null,"Average Voltage\u2248 ",q," mV"):r.a.createElement("h3",null,"Average Voltage\u2248 ",q," V"):"humidity"===V?r.a.createElement("h3",null,"Average Humidity\u2248 ",q,"%"):"pressure"===V?r.a.createElement("h3",null,"Average Pressure\u2248 ",q,"mBar"):"current"===V?r.a.createElement("h3",null,"Average Current\u2248 ",q,"A"):"consumption"===V&&r.a.createElement("h3",null,"Average Consumption\u2248 ",q,"W"));return r.a.createElement("div",null,r.a.createElement(nt,{size:"small",onClick:function(){o(!0)},startIcon:r.a.createElement(we.a,null)},"Set Calculation"),r.a.createElement(je.a,{open:i,onClose:function(){o(!1)},scroll:"paper"},r.a.createElement(Se.a,{id:"scroll-dialog-title"},"Calculate average value"),r.a.createElement(ye.a,{dividers:!0},ie)))}var ct=Object(E.a)((function(e){return{sem:{paddingTop:100,textAlign:"center"},grid:{width:"100%",margin:"0px"},paper:{padding:e.spacing(2),textAlign:"center",color:"#000"}}}));function lt(e){var t=6e4*(new Date).getTimezoneOffset(),a=e.socket,c=ct(),l=Object(n.useState)([]),i=Object(p.a)(l,2),o=i[0],u=i[1],s=Object(n.useState)([]),m=Object(p.a)(s,2),d=m[0],f=m[1],E=Object(n.useState)([]),b=Object(p.a)(E,2),g=b[0],v=b[1],O=Object(n.useState)([]),j=Object(p.a)(O,2),S=j[0],k=j[1],C=Object(n.useRef)(!1);Object(n.useEffect)((function(){return a.emit("GETGRAPHICS"),a.emit("GETMEASUREMENTS"),a.emit("GETDEVICES"),a.on("ListGraphics",(function(e){C.current||u(e)})),a.on("Devices",(function(e){C.current||f(e)})),a.on("Measurements",(function(e){C.current||v(e)})),function(){C.current=!0}}),[a]),Object(n.useEffect)((function(){var e=[];k([]),o.forEach((function(a){var n=[],r=[],c="",l=[],i=g.filter((function(e){return e.device_id===a.device})).reverse();l=i.length>100?i.slice(i.length-100,i.length):i,d.forEach((function(e){return e.ieeeAddr===a.device&&(c=e.friendly_name)})),l.forEach((function(e){e.device_id===a.device&&("state"===a.parameter?("ON"===e[a.parameter]?n.push(!0):"OFF"===e[a.parameter]&&n.push(!1),r.push(new Date(e.date).toLocaleString())):"occupancy"===a.parameter?("true"===e[a.parameter]?n.push(!0):"false"===e[a.parameter]&&n.push(!1),r.push(new Date(new Date(e.date)-t).toISOString().slice(0,-5).replace(/T/," "))):"brightness"===a.parameter?(n.push((100*e[a.parameter]/255).toFixed(0)),r.push(new Date(new Date(e.date)-t).toISOString().slice(0,-5).replace(/T/," "))):"color_temp"===a.parameter?(n.push((100*e[a.parameter]/510).toFixed(0)),r.push(new Date(new Date(e.date)-t).toISOString().slice(0,-5).replace(/T/," "))):(n.push(e[a.parameter]),r.push(new Date(new Date(e.date)-t).toISOString().slice(0,-5).replace(/T/," "))))})),e.push({labels:r,datasets:[{label:"".concat(a.parameter," of ").concat(c),steppedLine:!0,data:n,fill:!1,lineTension:.1,backgroundColor:"rgba(45, 45, 46, 0.69)",borderColor:"rgba(45, 45, 46, 0.69)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(45, 45, 46, 0.69)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(45, 45, 46, 0.69)",pointHoverBorderColor:"rgba(45, 45, 46, 0.69)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10}]}),k(e)}))}),[o,g,d,t]);var w={scales:{xAxes:[{ticks:{reverse:!1,maxTicksLimit:8,fontSize:10},gridLines:{display:!1}}],yAxes:[{ticks:{maxTicksLimit:5},gridLines:{display:!0}}]}};return r.a.createElement("div",null,r.a.createElement(tt,{socket:a}),r.a.createElement(rt,{socket:a}),S.length?r.a.createElement(P.a,{container:!0,spacing:6,className:c.grid},S.map((function(e,t){return r.a.createElement(P.a,{item:!0,xs:12,md:6,lg:6,key:t},r.a.createElement(R.a,{className:c.paper},r.a.createElement(P.a,{container:!0,justify:"flex-end",alignItems:"flex-end"},r.a.createElement(y.a,{style:{color:"black"},onClick:function(){return function(e,t){var n="";d.map((function(e){return e.friendly_name===t&&(n=e.ieeeAddr)})),a.emit("DeleteGraphic",{device:n,parameter:e})}(e.datasets[0].label.substring(0,e.datasets[0].label.indexOf(" ")),e.datasets[0].label.substring(e.datasets[0].label.indexOf("of ")+3,e.datasets[0].label.length))}},r.a.createElement(he.a,null))),r.a.createElement(Ye.Line,{key:t,data:e,options:w})))}))):r.a.createElement("div",{className:c.sem},r.a.createElement(h.a,{variant:"h3"},"NO GRAPHICS TO SHOW")))}var it={app:{backgroundImage:"url(".concat(d.a,")"),height:"100%",minHeight:"100vh"}},ot=s()("http://188.251.221.203:8000",{transports:["websocket","polling","flashsocket"]});var ut=function(){return r.a.createElement("div",{style:it.app},r.a.createElement(i.a,null,r.a.createElement(L,null),r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(ge,Object.assign({},e,{socket:ot}))}}),r.a.createElement(o.b,{exact:!0,path:"/divisions",render:function(e){return r.a.createElement(Ie,Object.assign({},e,{socket:ot}))}}),r.a.createElement(o.b,{exact:!0,path:"/scenes",render:function(e){return r.a.createElement(ze,Object.assign({},e,{socket:ot}))}}),r.a.createElement(o.b,{exact:!0,path:"/statistics",render:function(e){return r.a.createElement(lt,Object.assign({},e,{socket:ot}))}}),r.a.createElement(o.b,{exact:!0,path:"/devices_settings",render:function(e){return r.a.createElement(Ke,Object.assign({},e,{socket:ot}))}}))))},st=r.a.createContext(),mt=function(e){var t=e.children,a=Object(n.useState)(null),c=Object(p.a)(a,2),l=c[0],i=c[1];return Object(n.useEffect)((function(){I.auth().onAuthStateChanged(i)}),[]),r.a.createElement(st.Provider,{value:{currentUser:l}},t)},dt=a(494),pt=a(495),ft=a(506),Et=a(102),bt=a.n(Et),gt=Object(E.a)((function(e){return{container:{backgroundColor:"#bbb",height:"100%",minHeight:"100vh"},paper:{paddingTop:70,display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var vt=Object(o.g)((function(e){var t=e.history,a=gt(),c=Object(n.useCallback)(function(){var e=Object(ie.a)(le.a.mark((function e(a){var n,r,c;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=a.target.elements,r=n.email,c=n.password,e.prev=2,e.next=5,I.auth().createUserWithEmailAndPassword(r.value,c.value);case 5:t.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),alert(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),[t]);return Object(n.useContext)(st).currentUser?r.a.createElement(o.a,{to:"/"}):r.a.createElement("div",{className:a.container},r.a.createElement(dt.a,{component:"main",maxWidth:"xs"},r.a.createElement(pt.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(ft.a,{className:a.avatar},r.a.createElement(bt.a,null)),r.a.createElement(h.a,{component:"h1",variant:"h5"},"Sign Up"),r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:c},r.a.createElement(Oe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",placeholder:"Email",name:"email",autoFocus:!0}),r.a.createElement(Oe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",placeholder:"Password",type:"password",id:"password"}),r.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Sign Up")))))})),ht=Object(E.a)((function(e){return{container:{backgroundColor:"#bbb",height:"100%",minHeight:"100vh"},paper:{paddingTop:70,display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var Ot=Object(o.g)((function(e){var t=e.history,a=ht(),c=Object(n.useCallback)(function(){var e=Object(ie.a)(le.a.mark((function e(a){var n,r,c;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=a.target.elements,r=n.email,c=n.password,e.prev=2,e.next=5,I.auth().signInWithEmailAndPassword(r.value,c.value);case 5:t.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),alert(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),[t]);return Object(n.useContext)(st).currentUser?r.a.createElement(o.a,{to:"/"}):r.a.createElement("div",{className:a.container},r.a.createElement(dt.a,{component:"main",maxWidth:"xs"},r.a.createElement(pt.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(ft.a,{className:a.avatar},r.a.createElement(bt.a,null)),r.a.createElement(h.a,{component:"h1",variant:"h5"},"Login"),r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:c},r.a.createElement(Oe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",placeholder:"Email",name:"email",autoFocus:!0}),r.a.createElement(Oe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",placeholder:"Password",type:"password",id:"password"}),r.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Log In")))))})),jt=a(209),St=function(e){var t=e.component,a=Object(jt.a)(e,["component"]),c=Object(n.useContext)(st).currentUser;return r.a.createElement(o.b,Object.assign({},a,{render:function(e){return c?r.a.createElement(r.a.Fragment,null,r.a.createElement(t,e)):r.a.createElement(o.a,{to:"/login"})}}))};var yt=function(){return r.a.createElement(mt,null,r.a.createElement(i.a,null,r.a.createElement("div",null,r.a.createElement(St,{exact:!0,path:"/",component:ut}),r.a.createElement(o.b,{exact:!0,path:"/login",component:Ot}),r.a.createElement(o.b,{exact:!0,path:"/signup",component:vt}))))};l.a.render(r.a.createElement(yt,null),document.getElementById("root"))}},[[224,1,2]]]);
//# sourceMappingURL=main.e4c4ec90.chunk.js.map